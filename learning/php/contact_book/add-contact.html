<!DOCTYPE html>
<html>
<head>
	<title></title>
	<link rel="stylesheet" type="text/css" href="css/style.css">
	<link rel="preconnect" href="https://fonts.gstatic.com">
	<link href="https://fonts.googleapis.com/css2?family=Pompiere&display=swap" rel="stylesheet">
	<script src="//code.jquery.com/jquery-1.12.0.min.js"></script>
</head>
<body>
	<div class="wrapper">
		<div class="contact_book-header">
			<div class="header">
				<h1>Adress Book</h1>
			</div>

			<div class="header-menu">
				<ul>
					<a href="add-contact.html"><li>Add Contact</li></a>
					<a href="contacts.php" id="add-contact"><li>Contact List</li></a>
				</ul>
			</div>
		</div>

		<div class="contact_book-content">
			<div class="contact_form">
				<form id="contact-form_content" method="POST">
					<ul>
						<li><label for="name">First Name</label>
							<input type="text" name="fname" id="fname">
						</li>
						
						<li><label for="name">Last Name</label>
							<input type="text" name="lname" id="lname">
						</li>
						
						<li><label for="name">Phone</label>
							<input type="text" name="phone" id="phone">
						</li>
						
						<li><label for="name">Email</label>
							<input type="email" name="email" id="email">
						</li>
						
						<li><button id="contact_form-submit">Submit</button></li>
					</ul>
				</form>

				<div class="contact_added">
					<p id="result"></p>
				</div>						
			</div>
		</div>
	</div>

	<script>
		$(document).ready(function(){
			function validateForm(data){
				if(data == ""){

					$('#result').html("Please fill in all fields!").css('color','red');
					return false;
				}
				return true;
			}
			function isEmpty(){
				var array = $('#contact-form_content').serializeArray();
				dataObject = {};

				$(array).each(function(data, field ){
					dataObject[field.name] = field.value;
					console.log(field.value);
					if(dataObject[field.name] == ""){
						$('#result').html("Please fill in all fields!").css('color','red');
						console.log("empty");
						return false;
					}
				});

				return true;				
			}

			$('#contact-form_content').on('submit',function(e){

				e.preventDefault();

				var fname ="",lname="",phone="",email="";
				
				if(isEmpty()){
					fname = $('#fname').val();
					lname = $('#lname').val();
					phone = $('#phone').val();
					email = $('#email').val();

					$.ajax({
					type: 'POST',
					url: 'php/contact_form.php',
					data: {fname:fname,lname:lname,phone:phone,email:email},
					success : function(){
						var result_data = fname + " " + lname + " was added !";
						$('#result').html(result_data).css('color','green');	
						}

					});
				}				
			});
		});				
	</script>

</body>
</html>